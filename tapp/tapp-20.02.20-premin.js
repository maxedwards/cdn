function debugWrap(t,e){window._fnraws.push(t);var n="with(this) return `${"+t+"}`;",o="window._fnraws["+(window._fnraws.length-1)+"]";return new Function("try{"+n+"}catch(e){console.error(e.toString(),'IN','"+e+"', '[', "+o+", ']')}")}function tapp(t,e,n){var o=this;if(o.src=t.innerHTML,o.crumb=n||"APP",!t)throw"Invalid DOM node";return o.componentID=e||"MAIN",t.tapp=o,o.el=t,o._components=[],o._inners=[],o._attrs=[],o}window._fnraws=[],Object.prototype.shimQSA=function(t,e){return"function"!=typeof this.querySelectorAll?alert("Not a DOM node / QSA missing!"):this.querySelectorAll(t)},tapp.prototype.refreshComponents=function(t,e,n){var o=this;if(!t._comps){if(t.innerHTML.indexOf("t-component")<0)return t._comps=[];t._comps=t.shimQSA("[t-component]",o.crumb)}return e?(t._comps.forEach(e=>o._instantiateComponent(e,o,n?t:null)),t._comps.length):0},tapp.prototype._instantiateComponent=(divC,parent,hostel)=>{var C=this,cid;if(divC.tapp)return divC.tapp.render();if(Object.keys(tapp.templates).forEach(t=>{divC.classList.contains(t)&&(cid=t)}),!cid)return console.log(divC.className," is not a registered component class:");var O,el=divC,init=divC.getAttribute("t-init")||divC.innerText;with(parent.ctx)try{eval("O="+(init||"{}"))}catch(e){console.error(e.toString(),"in",parent.crumb,"COMPONENT",cid,"[",init,"]")}return divC.classList.remove("tapp"),divC.innerHTML=tapp.templates[cid],new tapp(divC,cid,parent.crumb+"."+cid),parent._components.push(divC.tapp),C.root=parent.root,divC.tapp.parent=parent,divC.tapp.root=C.root,divC.tapp.hostel=hostel,divC.tapp.create(O,C.root).render()},tapp.prototype.create=function(t,e){var n=this;return n.root=e||n.root||n,(t=t||{}).tapp=n,n.ctx=n.el.ctx=t,"function"==typeof tapp.on[n.componentID+".create"]&&tapp.on[n.componentID+".create"].call(n,n.ctx),n.expand(),n.refreshComponents(n.el),n},tapp.prototype.expand=function(){const skipattr="tapp t-component t-eval t-evalto t-html t-for t-implements t-boot t-init".split(" ");var C=this,el=C.el;function doExpand(L){var arr=L.getAttribute("t-for").split(":"),key=arr[0];with(C.ctx)arr=Array.from(eval(arr[1]));L.removeAttribute("t-for"),L.setAttribute("tapp",""),L.classList.add("t-exp");for(var tmpl=L.outerHTML.split(":"+key+":"),h="",i=0;i<arr.length;i++)h+=tmpl.join(i.toString());L.outerHTML=h}function expNext(){var t=document.querySelector("[t-for]");t&&(doExpand(t),expNext())}return C._inners.splice(0),C._components.splice(0),C._attrs.splice(0),expNext(),el.shimQSA("[t-evalto]",C.crumb).forEach(t=>{var e=t.getAttribute("t-evalto");t.outerHTML=`<${e} t-html>${t.getAttribute("t-html")||t.innerText}</${e}>`}),el.shimQSA("code",C.crumb).forEach(t=>{t.outerHTML=`<span t-html>${t.getAttribute("t-html")||t.innerText}</span>`}),el.shimQSA("[t-eval],[t-html]",C.crumb).forEach(t=>{t.tapp=C,t._evalRaw=t.getAttribute("t-eval")||t.getAttribute("t-html")||t.innerText,t.setAttribute("t-eval",""),t.setAttribute("t-html",""),C.ctx.Components=tapp.components,t.fnHTML=debugWrap(t._evalRaw,C.crumb+":HTML").bind(C.ctx),t.fnInner=function(){var e=t.fnHTML();t.innerHTML!=e&&(t._comps&&(t._comps.forEach(t=>{t.tapp.destroy(),delete t.tapp}),delete t._comps),t.innerHTML=e,C.refreshComponents(t,1,1))},C._inners.push(t.fnInner)}),el.shimQSA("[tapp],[t-eval],[t-html],[t-class],[t-style],[t-component]",C.crumb).forEach(t=>{t.ctx||(t.ctx=C.ctx,t.render=C.render.bind(C),t.refresh=function(){t._fnall.forEach(t=>t())}),t._fnall=[],t.getAttribute("t-class")&&!t.fnClass&&(t._classRaw=t.getAttribute("t-class"),t.removeAttribute("t-class"),t._basClass=t.className,t._fnClass=debugWrap(t._classRaw,C.crumb+":CLASS").bind(C.ctx),t.fnClass=function(){t.className=t._basClass+" "+t._fnClass()},C._attrs.push(t.fnClass),t._fnall.push(t.fnClass)),t.getAttribute("t-style")&&!t.fnStyle&&(t._styleRaw=t.getAttribute("t-style"),t.removeAttribute("t-style"),t._basStyle=t.style.cssText,t._fnStyle=debugWrap(t._styleRaw,C.crumb+":STYLE").bind(C.ctx),t.fnStyle=function(){t.style.cssText=t._basStyle+";"+t._fnStyle()},C._attrs.push(t.fnStyle),t._fnall.push(t.fnStyle)),Array.from(t.attributes).filter(t=>t.specified&&skipattr.indexOf(t.nodeName)<0&&t.nodeName.startsWith("t-")).forEach(e=>{var n=t.getAttribute(e.nodeName),o=e.nodeName.slice(e.nodeName.indexOf("-")+1);t.removeAttribute(e.nodeName);let r=debugWrap(n,C.crumb+":"+o).bind(C.ctx),a=function(){t.setAttribute(o,r())};C._attrs.push(a),t._fnall.push(a)})}),C},tapp.prototype.render=function(t,e){var n=this;return n._inners?("function"==typeof tapp.on[n.componentID+".render"]&&tapp.on[n.componentID+".render"].call(n,n.ctx),n._inners&&n._inners.forEach(t=>t()),n._attrs&&n._attrs.forEach(t=>t()),t||(refd=n.refreshComponents(n.el,1)),"function"==typeof tapp.on[n.componentID+".render-post"]&&tapp.on[n.componentID+".render-post"].call(n,n.ctx),n):console.warn("!!tapp.js: SKIPPED RENDER OF DESTROYED COMPONENT",n)},tapp.prototype.destroy=function(t){var e=this;return e.componentID&&"function"==typeof tapp.on[e.componentID+".destroy"]&&tapp.on[e.componentID+".destroy"].call(e,e.ctx),e.parent&&(e.parent.removeChild(e),delete e.parent),e._inners&&e._inners.splice(0),e._attrs&&e._attrs.splice(0),e._components&&e._components.forEach(t=>{delete t.parent,t.destroy()}),e._components&&e._components.splice(0),t?(e.el.innerHTML=e.src,e):(e.el?(e.el.innerHTML="",e.el.outerHTML=""):alert("An elementless component was redestroyed!"),delete e.el,delete e._inners,delete e._attrs,delete e._components,delete e.ctx,delete e.O,e)},tapp.prototype.reboot=tapp.prototype.reset=function(){this.ctx;this.destroy(1).create(this.ctx).render()},tapp.prototype.removeChild=function(t){var e=this._components.indexOf(t);if(e<0)throw"No such child";this._components.splice(e,1)},tapp.on={},tapp.templates={},tapp.fetches=0,tapp._fetched={};const phold="\x3c!--COMPONENT HAS NOT LOADED--\x3e";function includeHTML(then){let file,xhttp,whichc;var h0=document.getElementsByTagName("head")[0];document.shimQSA("[t-include-html]").forEach(elmnt=>{if(file=elmnt.getAttribute("t-include-html"),elmnt.removeAttribute("t-include-html"),file)return whichc=elmnt.getAttribute("t-implements"),whichc&&tapp.templates[whichc]?console.log("Ignoring include-html",file,"- component",whichc,"already loading or defined"):(whichc&&(tapp.templates[whichc]=phold),file?(tapp.fetches++,xhttp=new XMLHttpRequest,console.log("tapp:XHR fetching",file),xhttp.onreadystatechange=function(){4==this.readyState&&(tapp.fetches--,200==this.status?(elmnt.setAttribute("t-included",file),elmnt.innerHTML=this.responseText,elmnt.shimQSA("script","includeHTML").forEach(S=>{if(""!=S.src){var tag=document.createElement("script");tag.src=S.src,h0.appendChild(tag)}else try{eval(S.innerHTML)}catch(t){console.error(t)}})):elmnt.setAttribute("t-include-failed",file+":"+this.status),404==this.status&&(elmnt.innerHTML="<b>t-include-html</b><br /><br />404 not found: <pre>"+file+"</pre>"),elmnt.setAttribute("t-included",file),0==tapp.fetches&&(console.log("All XHR requests done (for now)"),then(!0)))},xhttp.open("GET",file,!0),void xhttp.send()):void 0)}),0==tapp.fetches&&(console.log("No XHR requests needed (for now)"),then())}function doRegister(){document.shimQSA("template.t-template,template[t-template]","registerComponents").forEach(t=>{if(t.innerHTML==phold)return console.log("Tried to register a component without letting it load first!",t);t.id||(t.id=t.getAttribute("t-template")),t.id&&(tapp.templates[t.id]&&tapp.templates[t.id]!=phold||(tapp.templates[t.id]=t.innerHTML,tapp.components=tapp.components||{},tapp.components[t.id]=function(e){return`<div t-component class="${t.id}">${JSON.stringify(e)}</div>`},tapp.components[t.id].all=function(e){return e.map(e=>tapp.components[t.id](e)).join("\n")}))})}tapp.registerComponents=function(t){!function e(){doRegister(),includeHTML((function(n){if(n)return e();"function"==typeof t&&t()}))}()},tapp.boot=function(t,e){"string"==typeof t&&(t=document.querySelector(t)),t.tapp||(t.tapp=new tapp(t).create(e));new Date;return t.tapp.render(),t.tapp},tapp._onready=[],tapp.onready=function(t){tapp._onready.push(t)},tapp.isReady=function(){tapp._onready.forEach(t=>t())},tapp._regOK=function(){if("complete"==document.readyState)return tapp.isReady();window.onload=tapp.isReady},"loading"==document.readyState?window.addEventListener("DOMContentLoaded",()=>tapp.registerComponents(tapp._regOK)):tapp.registerComponents(tapp._regOK),tapp.onready((function(){document.shimQSA("[t-boot]").forEach(el=>{var o={},boot=el.getAttribute("t-boot");if(boot)try{eval("o="+boot)}catch(t){console.error("t-boot invalid config:",t)}tapp.boot(el,o)})})),function(t,e){"use strict";"function"!=typeof t.CustomEvent&&(t.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var o=e.createEvent("CustomEvent");return o.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),o},t.CustomEvent.prototype=t.Event.prototype),e.addEventListener("touchstart",(function(t){"true"!==t.target.getAttribute("data-swipe-ignore")&&(i=t.target,p=Date.now(),n=t.touches[0].clientX,o=t.touches[0].clientY,r=0,a=0)}),!1),e.addEventListener("touchmove",(function(t){if(n&&o){var e=t.touches[0].clientX,p=t.touches[0].clientY;r=n-e,a=o-p}}),!1),e.addEventListener("touchend",(function(t){if(i===t.target){var e=parseInt(i.getAttribute("data-swipe-threshold")||"20",10),s=parseInt(i.getAttribute("data-swipe-timeout")||"500",10),c=Date.now()-p,l="";Math.abs(r)>Math.abs(a)?Math.abs(r)>e&&c<s&&(l=r>0?"swiped-left":"swiped-right"):Math.abs(a)>e&&c<s&&(l=a>0?"swiped-up":"swiped-down"),""!==l&&i.dispatchEvent(new CustomEvent(l,{bubbles:!0,cancelable:!0})),n=null,o=null,p=null}}),!1);var n=null,o=null,r=null,a=null,p=null,i=null}(window,document);